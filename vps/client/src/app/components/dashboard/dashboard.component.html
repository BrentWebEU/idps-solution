<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>IDPS Controle Paneel</h1>
    <p class="subtitle">Beheer uw Suricata Intrusion Detection and Prevention System</p>
  </header>

  <!-- Status sectie -->
  <section class="status-section">
    <div class="section-header">
      <h2>Container Status</h2>
      <button 
        class="btn btn-secondary" 
        (click)="refreshStatus()" 
        [disabled]="isLoading()">
        {{ isLoading() ? 'Laden...' : 'Ververs' }}
      </button>
    </div>

    @if (errorMessage()) {
      <div class="error-message">
        {{ errorMessage() }}
      </div>
    }

    @if (containerStatus(); as status) {
      <div class="status-card" [class.running]="status.running" [class.stopped]="!status.running">
        <div class="status-indicator">
          <span class="status-dot" [class.active]="status.running"></span>
          <span class="status-text">{{ status.running ? 'Actief' : 'Gestopt' }}</span>
        </div>
        <div class="status-details">
          <div class="detail-item">
            <span class="label">Naam:</span>
            <span class="value">{{ status.name }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Status:</span>
            <span class="value">{{ status.status }}</span>
          </div>
          <div class="detail-item">
            <span class="label">State:</span>
            <span class="value">{{ status.state }}</span>
          </div>
          <div class="detail-item">
            <span class="label">ID:</span>
            <span class="value">{{ status.id.substring(0, 12) }}...</span>
          </div>
        </div>
      </div>
    } @else {
      <div class="loading-message">Geen status beschikbaar</div>
    }
  </section>

  <!-- Controle knoppen -->
  <section class="control-section">
    <h2>Container Controles</h2>
    <div class="button-group">
      <button 
        class="btn btn-primary" 
        (click)="startSuricata()" 
        [disabled]="isLoading() || containerStatus()?.running">
        Start Suricata
      </button>
      <button 
        class="btn btn-danger" 
        (click)="stopSuricata()" 
        [disabled]="isLoading() || !containerStatus()?.running">
        Stop Suricata
      </button>
      <button 
        class="btn btn-warning" 
        (click)="restartSuricata()" 
        [disabled]="isLoading()">
        Herstart Suricata
      </button>
    </div>
  </section>

  <!-- Commando uitvoeren -->
  <section class="command-section">
    <h2>Commando Uitvoeren</h2>
    <div class="command-form">
      <div class="form-group">
        <label for="command">Commando:</label>
        <input 
          type="text" 
          id="command" 
          [value]="commandInput()" 
          (input)="commandInput.set($any($event.target).value)"
          placeholder="bijv. suricata"
          class="form-control">
      </div>
      <div class="form-group">
        <label for="args">Argumenten:</label>
        <input 
          type="text" 
          id="args" 
          [value]="argsInput()" 
          (input)="argsInput.set($any($event.target).value)"
          placeholder="bijv. -V"
          class="form-control">
      </div>
      <button 
        class="btn btn-primary" 
        (click)="executeCommand()" 
        [disabled]="isLoading()">
        Uitvoeren
      </button>
    </div>

    @if (execOutput(); as output) {
      <div class="output-container">
        <div class="output-section">
          <h3>Stdout:</h3>
          <pre class="output-text">{{ output.stdout || '(leeg)' }}</pre>
        </div>
        @if (output.stderr) {
          <div class="output-section">
            <h3>Stderr:</h3>
            <pre class="output-text error">{{ output.stderr }}</pre>
          </div>
        }
      </div>
    }
  </section>

  <!-- Logs sectie -->
  <section class="logs-section">
    <div class="section-header">
      <h2>Container Logs</h2>
      <button 
        class="btn btn-secondary" 
        (click)="loadLogs()" 
        [disabled]="isLoading()">
        {{ isLoading() ? 'Laden...' : 'Laad Logs' }}
      </button>
    </div>
    @if (logs()) {
      <div class="logs-container">
        <pre class="logs-text">{{ logs() }}</pre>
      </div>
    } @else {
      <div class="empty-message">Klik op "Laad Logs" om de container logs te bekijken</div>
    }
  </section>
</div>
